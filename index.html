<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Cascade Canvass â€” PWA</title>
  <link rel="manifest" href="manifest.webmanifest"/>
  <meta name="theme-color" content="#111111"/>
  <link rel="icon" href="icons/favicon.png"/>
  <link rel="apple-touch-icon" href="icons/icon-192.png"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="assets/style.css"/>
</head>
<body>
  <header class="topbar">
    <button class="iconbtn tree" onclick="toggleDrawer()" aria-label="Menu"><span class="tree-emoji">ðŸŒ²</span></button>
    <h1>Cascade Canvass</h1>
    </header>

  <aside id="drawer" class="drawer" aria-hidden="true">
    <header>Menu</header>
    <nav class="nav">
      <a href="#" onclick="nav('dashboard')">Home</a>
      <a href="#" onclick="nav('knock')">Next Door</a>
      <a href="#" onclick="nav('lead')">New Lead</a>
      <a href="#" onclick="nav('tracker')">Lead Tracker</a>
      <a href="#" onclick="nav('maptoday')">Map</a>
      <a href="#" onclick="nav('scripts')">Scripts</a>
      <a href="#" onclick="nav('settings')">Settings</a>
    </nav>
  </aside>

  <main id="view"></main>

  <footer class="foot"><small>Mobile PWA</small></footer>

  <div id="toast-root" aria-live="polite" aria-atomic="true"></div>
  <div id="err" class="err" style="display:none"></div>

  
  
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      function boot(){
        if (window.go && typeof renderDashboard === 'function') {
          try {
            go('dashboard');
            // If view stays empty after a short delay, show debug
            setTimeout(() => {
              const v = document.getElementById('view');
              if (v && (!v.innerHTML || v.innerHTML.trim() === '')) {
                v.innerHTML = '<section class="card"><h2>Debug</h2><p>Dashboard did not render.</p><p>Tap the menu (ðŸŒ²) then choose <b>Dashboard</b> or <b>Next Door</b>.</p></section>';
              }
            }, 150);
          } catch(e){
            const v = document.getElementById('view');
            if (v) v.innerHTML = '<section class="card"><h2>Boot Error</h2><pre>' + (e && (e.stack||e.message||e)) + '</pre></section>';
          }
        } else {
          setTimeout(boot, 50);
        }
      }
      boot();
    });
  </script>



</script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="assets/app.js"></script>
</body>
</html>
